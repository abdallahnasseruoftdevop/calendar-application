<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
        integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous" />
    <link href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="style.css" />
    <title>Work Day Scheduler</title>
</head>

<body>
    <header class="jumbotron">
        <h1 class="display-3">Work Day Scheduler</h1>
        <p class="lead">A simple calendar app for scheduling your work day</p>
        <p id="currentDay" class="lead">Monday, December 13th</p>
    </header>
    <div class="container">
        <!-- Timeblocks go here -->
        <div class="row" id="timeFrame">
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
    <script>
        let localStorageArray = [];

        document.getElementById("currentDay").innerHTML = moment().format('dddd ,MMMM Do');

        let innerHTML = '';
        // Create an array of hours from 9am to 5pm
        const timeArray = [9, 10, 11, 12, 13, 14, 15, 16, 17];

        // Get the current date and time
        const currentDate = new Date();

        // Get the current hour
        const currentHour = currentDate.getHours();

        // Loop through the time array
        let count = 0;
        for (let time of timeArray) {
            // Check if the current hour matches the value in the array
            if (time === currentHour) {
                let x = 'AM';
                if (time > 12) {
                    time = time - 12;
                    x = 'PM';
                }
                console.log(time + ":00 is the current hour");
                innerHTML += '<div class="col-lg-12"><div class="input-group"><div style="width:80px" class="input-group-prepend"><span class="input-group-text basic-addon1"> &nbsp;&nbsp; ' + time + x + '&nbsp;&nbsp;</span></div><input style="background-color:red; color:black" type="text" class="form-control ' + count + '" aria-label="Username"aria-describedby="basic-addon1"><div class="input-group-append basic-addon2"><span  class=" input-group-text basic-addon2">&nbsp;&nbsp;&nbsp;&nbsp; <i id=' + count + ' style="color: white;"class="xyz fas fa-save"></i>&nbsp;&nbsp; &nbsp;&nbsp;</span></div></div></div>'
            } else if (time < currentHour) {
                let x = 'AM';
                if (time > 12) {
                    time = time - 12;
                    x = 'PM';
                }
                console.log(time + ":00 is in the past");
                innerHTML += '<div class="col-lg-12"><div class="input-group"><div style="width:80px" class="input-group-prepend"><span class="input-group-text basic-addon1"> &nbsp;&nbsp; ' + time + x + '&nbsp;&nbsp;</span></div><input style="background-color:#D3D3D3; color:black" type="text" class="form-control ' + count + '" aria-label="Username"aria-describedby="basic-addon1"><div class="input-group-append basic-addon2"><span  class=" input-group-text basic-addon2">&nbsp;&nbsp;&nbsp;&nbsp; <i id=' + count + '  style="color: white;"class="xyz fas fa-save"></i>&nbsp;&nbsp; &nbsp;&nbsp;</span></div></div></div>'
            } else {
                let x = 'AM';
                if (time > 12) {
                    time = time - 12;
                    x = 'PM';
                }
                console.log(time + ":00 is in the future");
                innerHTML += '<div class="col-lg-12"><div class="input-group"><div  style="width:80px"class="input-group-prepend"><span class="input-group-text basic-addon1"> &nbsp;&nbsp; ' + time + x + '&nbsp;&nbsp;</span></div><input style="background-color:green; color:black" type="text" class="form-control ' + count + '" aria-label="Username"aria-describedby="basic-addon1"><div class="input-group-append basic-addon2"><span class=" input-group-text basic-addon2">&nbsp;&nbsp;&nbsp;&nbsp; <i id=' + count + '  style="color: white;"class="xyz fas fa-save"></i>&nbsp;&nbsp; &nbsp;&nbsp;</span></div></div></div>'
            }
            count++;
        }
        $('#timeFrame').html(innerHTML);


        $('.xyz').click(function (event) {
            let element = $('.' + $(event.target).attr('id'))
            if (element && element.val()) {
                console.log("ðŸš€ ~ file: assignment1.html:79 ~ element", element.val())
                localStorageArray[$(event.target).attr('id')] = element.val();
                localStorage.setItem('work', JSON.stringify(localStorageArray));
            }
        });

        if (localStorage.getItem('work')) {
            localStorageArray = JSON.parse(localStorage.getItem('work'));
            for (let i = 0; i < localStorageArray.length; i++) {
                if (localStorageArray[i]) {
                    const element = localStorageArray[i];
                    $('.' + i).val(localStorageArray[i]);
                }
            }
        }
    </script>
</body>

</html>